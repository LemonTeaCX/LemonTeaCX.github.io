import{h as _t,t as lo,_ as mt,r as S,j as pe,J as ro,k as yt,l as co,a as K,o as C,n as T,c as B,w as b,b as $,q as uo,s as j,v as rn,T as fo,d as w,e as R,x as vo,y as U,F as J,z as de,A as po,B as pt,C as ho,D as go,E as _o,G as mo,u as yo,H as wo,I as ft,K as Zt,L as vt,m as q,M as ko,N as qt,O as xo,p as Co,g as bo,P as Lo,i as No,Q as Jt,R as So,S as Mo}from"./index-DHVDLkLp.js";const Do=""+new URL("agent_help-Bq0IrRbA.svg",import.meta.url).href,$o="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.2196%205.25004C10.7393%205.25004%2010.9996%205.87837%2010.6321%206.24585L7.2729%209.60502C7.04509%209.83283%206.67575%209.83283%206.44794%209.60502L3.08877%206.24585C2.72129%205.87837%202.98156%205.25004%203.50125%205.25004H10.2196Z'%20fill='white'%20fill-opacity='0.65'/%3e%3c/svg%3e",To="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.81821%207.65166C1.67176%207.79811%201.67176%208.03555%201.81821%208.18199C1.96466%208.32844%202.20209%208.32844%202.34854%208.18199L4.94112%205.58942C5.26655%205.26398%205.26655%204.73634%204.94112%204.41091L2.34854%201.81833C2.20209%201.67188%201.96466%201.67188%201.81821%201.81833C1.67176%201.96478%201.67176%202.20221%201.81821%202.34866L4.46971%205.00016L1.81821%207.65166Z'%20fill='white'/%3e%3cpath%20d='M4.73488%207.65166C4.58843%207.79811%204.58843%208.03555%204.73488%208.18199C4.88132%208.32844%205.11876%208.32844%205.26521%208.18199L7.85778%205.58942C8.18322%205.26398%208.18322%204.73634%207.85778%204.41091L5.26521%201.81833C5.11876%201.67188%204.88132%201.67188%204.73488%201.81833C4.58843%201.96478%204.58843%202.20221%204.73488%202.34866L7.38638%205.00016L4.73488%207.65166Z'%20fill='white'/%3e%3c/svg%3e",Io="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.26518%207.65166C5.41162%207.79811%205.41162%208.03555%205.26518%208.18199C5.11873%208.32844%204.88129%208.32844%204.73485%208.18199L2.14227%205.58942C1.81683%205.26398%201.81683%204.73634%202.14227%204.41091L4.73485%201.81833C4.88129%201.67188%205.11873%201.67188%205.26518%201.81833C5.41162%201.96478%205.41162%202.20221%205.26518%202.34866L2.61368%205.00016L5.26518%207.65166Z'%20fill='white'/%3e%3cpath%20d='M8.18184%207.65166C8.32829%207.79811%208.32829%208.03555%208.18184%208.18199C8.0354%208.32844%207.79796%208.32844%207.65151%208.18199L5.05894%205.58942C4.7335%205.26398%204.7335%204.73634%205.05894%204.41091L7.65151%201.81833C7.79796%201.67188%208.0354%201.67188%208.18184%201.81833C8.32829%201.96478%208.32829%202.20221%208.18184%202.34866L5.53034%205.00016L8.18184%207.65166Z'%20fill='white'/%3e%3c/svg%3e",Po=""+new URL("../img/chat_icon_other.png",import.meta.url).href,cn=""+new URL("../img/file.png",import.meta.url).href,Ao=""+new URL("../img/chat_icon_self.png",import.meta.url).href,Eo="data:image/svg+xml,%3csvg%20width='25'%20height='24'%20viewBox='0%200%2025%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.8341%208.45111V7.00484C21.8341%205.76267%2020.849%204.3732%2019.5306%204.3732H12.8888L12.615%203.85645C12.3411%203.33256%2011.8043%203.00732%2011.2133%203.00732H4.12645C2.94434%203.00732%201.98315%203.99565%201.98315%205.21069V18.6999C1.98315%2019.9143%202.94434%2020.9023%204.12645%2020.9023H20.8032C21.9853%2020.9023%2022.9465%2019.9143%2022.9465%2018.6999V10.4207C22.9464%209.70269%2022.4718%208.94282%2021.8341%208.45111ZM19.5306%205.69613C19.9886%205.69613%2020.5112%206.39344%2020.5112%207.00484V7.91986C20.4888%207.91895%2020.4663%207.91758%2020.444%207.91758H14.7667L13.5897%205.69613H19.5306ZM21.6235%2018.6999C21.6235%2019.1847%2021.2553%2019.5794%2020.8031%2019.5794H4.12645C3.67429%2019.5794%203.30608%2019.1847%203.30608%2018.6999V5.21069C3.30608%204.72524%203.67427%204.33025%204.12645%204.33025H11.2133C11.3102%204.33025%2011.398%204.38355%2011.4445%204.47267L13.7842%208.88878C13.8405%208.99494%2013.9247%209.08377%2014.0277%209.14573C14.1307%209.20769%2014.2486%209.24045%2014.3688%209.24051H20.444C20.9182%209.24051%2021.6235%209.94653%2021.6235%2010.4207V18.6999H21.6235Z'%20fill='%238F959E'/%3e%3c/svg%3e",jo="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_87_17078)'%3e%3cpath%20d='M1.90721%2015.3408C0.92127%2015.8508%200.323164%2015.395%200.571921%2014.3201L1.59236%209.91063C1.7167%209.37332%202.25463%208.88828%202.81146%208.82527L9.007%208.12426C10.6547%207.93782%2010.6606%207.63876%209.007%207.45485L2.81146%206.76577C2.26252%206.70472%201.71652%206.21769%201.59236%205.67972L0.571921%201.25851C0.323442%200.181932%200.912524%20-0.281918%201.90721%200.232572L14.7266%206.8633C15.7126%207.37327%2015.7213%208.19557%2014.7266%208.71006L1.90721%2015.3408Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_87_17078'%3e%3crect%20width='15'%20height='16'%20fill='white'%20transform='translate(0.503662)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Oo="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%204.5C3%203.67158%203.67158%203%204.5%203H17.1407L21%206.60325V19.5C21%2020.3284%2020.3284%2021%2019.5%2021H4.5C3.67158%2021%203%2020.3284%203%2019.5V4.5Z'%20fill='white'%20stroke='white'%20stroke-width='2'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.0042%203L12%206.6923C12%206.86225%2011.7761%207%2011.5%207H7.5C7.22385%207%207%206.86225%207%206.6923V3'%20fill='%235E230B'/%3e%3cpath%20d='M12.0042%203L12%206.6923C12%206.86225%2011.7761%207%2011.5%207H7.5C7.22385%207%207%206.86225%207%206.6923V3H12.0042Z'%20stroke='%235E230B'%20stroke-width='2'%20stroke-linejoin='round'/%3e%3cpath%20d='M4.5%203H17.1407'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M7%2013H17'%20stroke='%235E230B'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M7%2017H12.0042'%20stroke='%235E230B'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Ro="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.53033%205.46967C6.23744%205.17678%205.76256%205.17678%205.46967%205.46967C5.17678%205.76256%205.17678%206.23744%205.46967%206.53033L10.9393%2012L5.46967%2017.4697C5.17678%2017.7626%205.17678%2018.2374%205.46967%2018.5303C5.76256%2018.8232%206.23744%2018.8232%206.53033%2018.5303L12%2013.0607L17.4697%2018.5303C17.7626%2018.8232%2018.2374%2018.8232%2018.5303%2018.5303C18.8232%2018.2374%2018.8232%2017.7626%2018.5303%2017.4697L13.0607%2012L18.5303%206.53033C18.8232%206.23744%2018.8232%205.76256%2018.5303%205.46967C18.2374%205.17678%2017.7626%205.17678%2017.4697%205.46967L12%2010.9393L6.53033%205.46967Z'%20fill='%232B2F36'/%3e%3c/svg%3e",Vo="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.63634%205.63598C5.44887%205.8235%205.34356%206.07781%205.34356%206.34298C5.34356%206.60814%205.44887%206.86245%205.63634%207.04998L10.5863%2012L5.63634%2016.95C5.54083%2017.0422%205.46465%2017.1526%205.41224%2017.2746C5.35983%2017.3966%205.33225%2017.5278%205.33109%2017.6606C5.32994%2017.7934%205.35524%2017.925%205.40552%2018.0479C5.4558%2018.1708%205.53006%2018.2825%205.62395%2018.3764C5.71784%2018.4703%205.82949%2018.5445%205.95239%2018.5948C6.07529%2018.6451%206.20696%2018.6704%206.33974%2018.6692C6.47252%2018.6681%206.60374%2018.6405%206.72575%2018.5881C6.84775%2018.5357%206.9581%2018.4595%207.05034%2018.364L12.0003%2013.414L16.9503%2018.364C17.1389%2018.5461%2017.3915%2018.6469%2017.6537%2018.6447C17.9159%2018.6424%2018.1668%2018.5372%2018.3522%2018.3518C18.5376%2018.1664%2018.6427%2017.9156%2018.645%2017.6534C18.6473%2017.3912%2018.5465%2017.1386%2018.3643%2016.95L13.4143%2012L18.3643%207.04998C18.5519%206.86234%2018.6571%206.60789%2018.657%206.34262C18.657%206.07735%2018.5515%205.82298%2018.3638%205.63548C18.1762%205.44797%2017.9218%205.34268%2017.6565%205.34277C17.3912%205.34287%2017.1369%205.44834%2016.9493%205.63598L12.0003%2010.586L7.05034%205.63598C6.86286%205.44881%206.60876%205.34369%206.34384%205.34369C6.07892%205.34369%205.82383%205.44881%205.63634%205.63598Z'%20fill='white'/%3e%3c/svg%3e";function un(e,t){var n,o=1;e==null&&(e=0),t==null&&(t=0);function s(){var i,d=n.length,l,g=0,r=0;for(i=0;i<d;++i)l=n[i],g+=l.x,r+=l.y;for(g=(g/d-e)*o,r=(r/d-t)*o,i=0;i<d;++i)l=n[i],l.x-=g,l.y-=r}return s.initialize=function(i){n=i},s.x=function(i){return arguments.length?(e=+i,s):e},s.y=function(i){return arguments.length?(t=+i,s):t},s.strength=function(i){return arguments.length?(o=+i,s):o},s}function Bo(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return dn(this.cover(t,n),t,n,e)}function dn(e,t,n,o){if(isNaN(t)||isNaN(n))return e;var s,i=e._root,d={data:o},l=e._x0,g=e._y0,r=e._x1,_=e._y1,M,y,p,k,f,u,h,x;if(!i)return e._root=d,e;for(;i.length;)if((f=t>=(M=(l+r)/2))?l=M:r=M,(u=n>=(y=(g+_)/2))?g=y:_=y,s=i,!(i=i[h=u<<1|f]))return s[h]=d,e;if(p=+e._x.call(null,i.data),k=+e._y.call(null,i.data),t===p&&n===k)return d.next=i,s?s[h]=d:e._root=d,e;do s=s?s[h]=new Array(4):e._root=new Array(4),(f=t>=(M=(l+r)/2))?l=M:r=M,(u=n>=(y=(g+_)/2))?g=y:_=y;while((h=u<<1|f)===(x=(k>=y)<<1|p>=M));return s[x]=i,s[h]=d,e}function Ho(e){var t,n,o=e.length,s,i,d=new Array(o),l=new Array(o),g=1/0,r=1/0,_=-1/0,M=-1/0;for(n=0;n<o;++n)isNaN(s=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(d[n]=s,l[n]=i,s<g&&(g=s),s>_&&(_=s),i<r&&(r=i),i>M&&(M=i));if(g>_||r>M)return this;for(this.cover(g,r).cover(_,M),n=0;n<o;++n)dn(this,d[n],l[n],e[n]);return this}function Uo(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,o=this._y0,s=this._x1,i=this._y1;if(isNaN(n))s=(n=Math.floor(e))+1,i=(o=Math.floor(t))+1;else{for(var d=s-n||1,l=this._root,g,r;n>e||e>=s||o>t||t>=i;)switch(r=(t<o)<<1|e<n,g=new Array(4),g[r]=l,l=g,d*=2,r){case 0:s=n+d,i=o+d;break;case 1:n=s-d,i=o+d;break;case 2:s=n+d,o=i-d;break;case 3:n=s-d,o=i-d;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=o,this._x1=s,this._y1=i,this}function zo(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Fo(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function oe(e,t,n,o,s){this.node=e,this.x0=t,this.y0=n,this.x1=o,this.y1=s}function Ko(e,t,n){var o,s=this._x0,i=this._y0,d,l,g,r,_=this._x1,M=this._y1,y=[],p=this._root,k,f;for(p&&y.push(new oe(p,s,i,_,M)),n==null?n=1/0:(s=e-n,i=t-n,_=e+n,M=t+n,n*=n);k=y.pop();)if(!(!(p=k.node)||(d=k.x0)>_||(l=k.y0)>M||(g=k.x1)<s||(r=k.y1)<i))if(p.length){var u=(d+g)/2,h=(l+r)/2;y.push(new oe(p[3],u,h,g,r),new oe(p[2],d,h,u,r),new oe(p[1],u,l,g,h),new oe(p[0],d,l,u,h)),(f=(t>=h)<<1|e>=u)&&(k=y[y.length-1],y[y.length-1]=y[y.length-1-f],y[y.length-1-f]=k)}else{var x=e-+this._x.call(null,p.data),D=t-+this._y.call(null,p.data),L=x*x+D*D;if(L<n){var E=Math.sqrt(n=L);s=e-E,i=t-E,_=e+E,M=t+E,o=p.data}}return o}function Wo(e){if(isNaN(_=+this._x.call(null,e))||isNaN(M=+this._y.call(null,e)))return this;var t,n=this._root,o,s,i,d=this._x0,l=this._y0,g=this._x1,r=this._y1,_,M,y,p,k,f,u,h;if(!n)return this;if(n.length)for(;;){if((k=_>=(y=(d+g)/2))?d=y:g=y,(f=M>=(p=(l+r)/2))?l=p:r=p,t=n,!(n=n[u=f<<1|k]))return this;if(!n.length)break;(t[u+1&3]||t[u+2&3]||t[u+3&3])&&(o=t,h=u)}for(;n.data!==e;)if(s=n,!(n=n.next))return this;return(i=n.next)&&delete n.next,s?(i?s.next=i:delete s.next,this):t?(i?t[u]=i:delete t[u],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(o?o[h]=n:this._root=n),this):(this._root=i,this)}function Go(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Zo(){return this._root}function qo(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Jo(e){var t=[],n,o=this._root,s,i,d,l,g;for(o&&t.push(new oe(o,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(o=n.node,i=n.x0,d=n.y0,l=n.x1,g=n.y1)&&o.length){var r=(i+l)/2,_=(d+g)/2;(s=o[3])&&t.push(new oe(s,r,_,l,g)),(s=o[2])&&t.push(new oe(s,i,_,r,g)),(s=o[1])&&t.push(new oe(s,r,d,l,_)),(s=o[0])&&t.push(new oe(s,i,d,r,_))}return this}function Qo(e){var t=[],n=[],o;for(this._root&&t.push(new oe(this._root,this._x0,this._y0,this._x1,this._y1));o=t.pop();){var s=o.node;if(s.length){var i,d=o.x0,l=o.y0,g=o.x1,r=o.y1,_=(d+g)/2,M=(l+r)/2;(i=s[0])&&t.push(new oe(i,d,l,_,M)),(i=s[1])&&t.push(new oe(i,_,l,g,M)),(i=s[2])&&t.push(new oe(i,d,M,_,r)),(i=s[3])&&t.push(new oe(i,_,M,g,r))}n.push(o)}for(;o=n.pop();)e(o.node,o.x0,o.y0,o.x1,o.y1);return this}function Xo(e){return e[0]}function Yo(e){return arguments.length?(this._x=e,this):this._x}function ea(e){return e[1]}function ta(e){return arguments.length?(this._y=e,this):this._y}function wt(e,t,n){var o=new kt(t??Xo,n??ea,NaN,NaN,NaN,NaN);return e==null?o:o.addAll(e)}function kt(e,t,n,o,s,i){this._x=e,this._y=t,this._x0=n,this._y0=o,this._x1=s,this._y1=i,this._root=void 0}function Qt(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ae=wt.prototype=kt.prototype;ae.copy=function(){var e=new kt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,o;if(!t)return e;if(!t.length)return e._root=Qt(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var s=0;s<4;++s)(o=t.source[s])&&(o.length?n.push({source:o,target:t.target[s]=new Array(4)}):t.target[s]=Qt(o));return e};ae.add=Bo;ae.addAll=Ho;ae.cover=Uo;ae.data=zo;ae.extent=Fo;ae.find=Ko;ae.remove=Wo;ae.removeAll=Go;ae.root=Zo;ae.size=qo;ae.visit=Jo;ae.visitAfter=Qo;ae.x=Yo;ae.y=ta;function Y(e){return function(){return e}}function ye(e){return(e()-.5)*1e-6}function na(e){return e.x+e.vx}function oa(e){return e.y+e.vy}function fn(e){var t,n,o,s=1,i=1;typeof e!="function"&&(e=Y(e==null?1:+e));function d(){for(var r,_=t.length,M,y,p,k,f,u,h=0;h<i;++h)for(M=wt(t,na,oa).visitAfter(l),r=0;r<_;++r)y=t[r],f=n[y.index],u=f*f,p=y.x+y.vx,k=y.y+y.vy,M.visit(x);function x(D,L,E,V,P){var A=D.data,O=D.r,z=f+O;if(A){if(A.index>y.index){var G=p-A.x-A.vx,ee=k-A.y-A.vy,Q=G*G+ee*ee;Q<z*z&&(G===0&&(G=ye(o),Q+=G*G),ee===0&&(ee=ye(o),Q+=ee*ee),Q=(z-(Q=Math.sqrt(Q)))/Q*s,y.vx+=(G*=Q)*(z=(O*=O)/(u+O)),y.vy+=(ee*=Q)*z,A.vx-=G*(z=1-z),A.vy-=ee*z)}return}return L>p+z||V<p-z||E>k+z||P<k-z}}function l(r){if(r.data)return r.r=n[r.data.index];for(var _=r.r=0;_<4;++_)r[_]&&r[_].r>r.r&&(r.r=r[_].r)}function g(){if(t){var r,_=t.length,M;for(n=new Array(_),r=0;r<_;++r)M=t[r],n[M.index]=+e(M,r,t)}}return d.initialize=function(r,_){t=r,o=_,g()},d.iterations=function(r){return arguments.length?(i=+r,d):i},d.strength=function(r){return arguments.length?(s=+r,d):s},d.radius=function(r){return arguments.length?(e=typeof r=="function"?r:Y(+r),g(),d):e},d}function aa(e){return e.index}function Xt(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function vn(e){var t=aa,n=M,o,s=Y(30),i,d,l,g,r,_=1;e==null&&(e=[]);function M(u){return 1/Math.min(l[u.source.index],l[u.target.index])}function y(u){for(var h=0,x=e.length;h<_;++h)for(var D=0,L,E,V,P,A,O,z;D<x;++D)L=e[D],E=L.source,V=L.target,P=V.x+V.vx-E.x-E.vx||ye(r),A=V.y+V.vy-E.y-E.vy||ye(r),O=Math.sqrt(P*P+A*A),O=(O-i[D])/O*u*o[D],P*=O,A*=O,V.vx-=P*(z=g[D]),V.vy-=A*z,E.vx+=P*(z=1-z),E.vy+=A*z}function p(){if(d){var u,h=d.length,x=e.length,D=new Map(d.map((E,V)=>[t(E,V,d),E])),L;for(u=0,l=new Array(h);u<x;++u)L=e[u],L.index=u,typeof L.source!="object"&&(L.source=Xt(D,L.source)),typeof L.target!="object"&&(L.target=Xt(D,L.target)),l[L.source.index]=(l[L.source.index]||0)+1,l[L.target.index]=(l[L.target.index]||0)+1;for(u=0,g=new Array(x);u<x;++u)L=e[u],g[u]=l[L.source.index]/(l[L.source.index]+l[L.target.index]);o=new Array(x),k(),i=new Array(x),f()}}function k(){if(d)for(var u=0,h=e.length;u<h;++u)o[u]=+n(e[u],u,e)}function f(){if(d)for(var u=0,h=e.length;u<h;++u)i[u]=+s(e[u],u,e)}return y.initialize=function(u,h){d=u,r=h,p()},y.links=function(u){return arguments.length?(e=u,p(),y):e},y.id=function(u){return arguments.length?(t=u,y):t},y.iterations=function(u){return arguments.length?(_=+u,y):_},y.strength=function(u){return arguments.length?(n=typeof u=="function"?u:Y(+u),k(),y):n},y.distance=function(u){return arguments.length?(s=typeof u=="function"?u:Y(+u),f(),y):s},y}var sa={value:()=>{}};function pn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new We(n)}function We(e){this._=e}function ia(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",s=n.indexOf(".");if(s>=0&&(o=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}We.prototype=pn.prototype={constructor:We,on:function(e,t){var n=this._,o=ia(e+"",n),s,i=-1,d=o.length;if(arguments.length<2){for(;++i<d;)if((s=(e=o[i]).type)&&(s=la(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<d;)if(s=(e=o[i]).type)n[s]=Yt(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Yt(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new We(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),o=0,s,i;o<s;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,s=i.length;o<s;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,i=o.length;s<i;++s)o[s].value.apply(t,n)}};function la(e,t){for(var n=0,o=e.length,s;n<o;++n)if((s=e[n]).name===t)return s.value}function Yt(e,t,n){for(var o=0,s=e.length;o<s;++o)if(e[o].name===t){e[o]=sa,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Le=0,Ae=0,Pe=0,hn=1e3,Ze,Ee,qe=0,xe=0,Je=0,Oe=typeof performance=="object"&&performance.now?performance:Date,gn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _n(){return xe||(gn(ra),xe=Oe.now()+Je)}function ra(){xe=0}function ht(){this._call=this._time=this._next=null}ht.prototype=mn.prototype={constructor:ht,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?_n():+n)+(t==null?0:+t),!this._next&&Ee!==this&&(Ee?Ee._next=this:Ze=this,Ee=this),this._call=e,this._time=n,gt()},stop:function(){this._call&&(this._call=null,this._time=1/0,gt())}};function mn(e,t,n){var o=new ht;return o.restart(e,t,n),o}function ca(){_n(),++Le;for(var e=Ze,t;e;)(t=xe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Le}function en(){xe=(qe=Oe.now())+Je,Le=Ae=0;try{ca()}finally{Le=0,da(),xe=0}}function ua(){var e=Oe.now(),t=e-qe;t>hn&&(Je-=t,qe=e)}function da(){for(var e,t=Ze,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ze=n);Ee=e,gt(o)}function gt(e){if(!Le){Ae&&(Ae=clearTimeout(Ae));var t=e-xe;t>24?(e<1/0&&(Ae=setTimeout(en,e-Oe.now()-Je)),Pe&&(Pe=clearInterval(Pe))):(Pe||(qe=Oe.now(),Pe=setInterval(ua,hn)),Le=1,gn(en))}}const fa=1664525,va=1013904223,tn=4294967296;function pa(){let e=1;return()=>(e=(fa*e+va)%tn)/tn}function ha(e){return e.x}function ga(e){return e.y}var _a=10,ma=Math.PI*(3-Math.sqrt(5));function yn(e){var t,n=1,o=.001,s=1-Math.pow(o,1/300),i=0,d=.6,l=new Map,g=mn(M),r=pn("tick","end"),_=pa();e==null&&(e=[]);function M(){y(),r.call("tick",t),n<o&&(g.stop(),r.call("end",t))}function y(f){var u,h=e.length,x;f===void 0&&(f=1);for(var D=0;D<f;++D)for(n+=(i-n)*s,l.forEach(function(L){L(n)}),u=0;u<h;++u)x=e[u],x.fx==null?x.x+=x.vx*=d:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=d:(x.y=x.fy,x.vy=0);return t}function p(){for(var f=0,u=e.length,h;f<u;++f){if(h=e[f],h.index=f,h.fx!=null&&(h.x=h.fx),h.fy!=null&&(h.y=h.fy),isNaN(h.x)||isNaN(h.y)){var x=_a*Math.sqrt(.5+f),D=f*ma;h.x=x*Math.cos(D),h.y=x*Math.sin(D)}(isNaN(h.vx)||isNaN(h.vy))&&(h.vx=h.vy=0)}}function k(f){return f.initialize&&f.initialize(e,_),f}return p(),t={tick:y,restart:function(){return g.restart(M),t},stop:function(){return g.stop(),t},nodes:function(f){return arguments.length?(e=f,p(),l.forEach(k),t):e},alpha:function(f){return arguments.length?(n=+f,t):n},alphaMin:function(f){return arguments.length?(o=+f,t):o},alphaDecay:function(f){return arguments.length?(s=+f,t):+s},alphaTarget:function(f){return arguments.length?(i=+f,t):i},velocityDecay:function(f){return arguments.length?(d=1-f,t):1-d},randomSource:function(f){return arguments.length?(_=f,l.forEach(k),t):_},force:function(f,u){return arguments.length>1?(u==null?l.delete(f):l.set(f,k(u)),t):l.get(f)},find:function(f,u,h){var x=0,D=e.length,L,E,V,P,A;for(h==null?h=1/0:h*=h,x=0;x<D;++x)P=e[x],L=f-P.x,E=u-P.y,V=L*L+E*E,V<h&&(A=P,h=V);return A},on:function(f,u){return arguments.length>1?(r.on(f,u),t):r.on(f)}}}function wn(){var e,t,n,o,s=Y(-30),i,d=1,l=1/0,g=.81;function r(p){var k,f=e.length,u=wt(e,ha,ga).visitAfter(M);for(o=p,k=0;k<f;++k)t=e[k],u.visit(y)}function _(){if(e){var p,k=e.length,f;for(i=new Array(k),p=0;p<k;++p)f=e[p],i[f.index]=+s(f,p,e)}}function M(p){var k=0,f,u,h=0,x,D,L;if(p.length){for(x=D=L=0;L<4;++L)(f=p[L])&&(u=Math.abs(f.value))&&(k+=f.value,h+=u,x+=u*f.x,D+=u*f.y);p.x=x/h,p.y=D/h}else{f=p,f.x=f.data.x,f.y=f.data.y;do k+=i[f.data.index];while(f=f.next)}p.value=k}function y(p,k,f,u){if(!p.value)return!0;var h=p.x-t.x,x=p.y-t.y,D=u-k,L=h*h+x*x;if(D*D/g<L)return L<l&&(h===0&&(h=ye(n),L+=h*h),x===0&&(x=ye(n),L+=x*x),L<d&&(L=Math.sqrt(d*L)),t.vx+=h*p.value*o/L,t.vy+=x*p.value*o/L),!0;if(p.length||L>=l)return;(p.data!==t||p.next)&&(h===0&&(h=ye(n),L+=h*h),x===0&&(x=ye(n),L+=x*x),L<d&&(L=Math.sqrt(d*L)));do p.data!==t&&(D=i[p.data.index]*o/L,t.vx+=h*D,t.vy+=x*D);while(p=p.next)}return r.initialize=function(p,k){e=p,n=k,_()},r.strength=function(p){return arguments.length?(s=typeof p=="function"?p:Y(+p),_(),r):s},r.distanceMin=function(p){return arguments.length?(d=p*p,r):Math.sqrt(d)},r.distanceMax=function(p){return arguments.length?(l=p*p,r):Math.sqrt(l)},r.theta=function(p){return arguments.length?(g=p*p,r):Math.sqrt(g)},r}function ya(e,t,n){var o,s=Y(.1),i,d;typeof e!="function"&&(e=Y(+e)),t==null&&(t=0),n==null&&(n=0);function l(r){for(var _=0,M=o.length;_<M;++_){var y=o[_],p=y.x-t||1e-6,k=y.y-n||1e-6,f=Math.sqrt(p*p+k*k),u=(d[_]-f)*i[_]*r/f;y.vx+=p*u,y.vy+=k*u}}function g(){if(o){var r,_=o.length;for(i=new Array(_),d=new Array(_),r=0;r<_;++r)d[r]=+e(o[r],r,o),i[r]=isNaN(d[r])?0:+s(o[r],r,o)}}return l.initialize=function(r){o=r,g()},l.strength=function(r){return arguments.length?(s=typeof r=="function"?r:Y(+r),g(),l):s},l.radius=function(r){return arguments.length?(e=typeof r=="function"?r:Y(+r),g(),l):e},l.x=function(r){return arguments.length?(t=+r,l):t},l.y=function(r){return arguments.length?(n=+r,l):n},l}function wa(e){var t=Y(.1),n,o,s;typeof e!="function"&&(e=Y(e==null?0:+e));function i(l){for(var g=0,r=n.length,_;g<r;++g)_=n[g],_.vx+=(s[g]-_.x)*o[g]*l}function d(){if(n){var l,g=n.length;for(o=new Array(g),s=new Array(g),l=0;l<g;++l)o[l]=isNaN(s[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return i.initialize=function(l){n=l,d()},i.strength=function(l){return arguments.length?(t=typeof l=="function"?l:Y(+l),d(),i):t},i.x=function(l){return arguments.length?(e=typeof l=="function"?l:Y(+l),d(),i):e},i}function ka(e){var t=Y(.1),n,o,s;typeof e!="function"&&(e=Y(e==null?0:+e));function i(l){for(var g=0,r=n.length,_;g<r;++g)_=n[g],_.vy+=(s[g]-_.y)*o[g]*l}function d(){if(n){var l,g=n.length;for(o=new Array(g),s=new Array(g),l=0;l<g;++l)o[l]=isNaN(s[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return i.initialize=function(l){n=l,d()},i.strength=function(l){return arguments.length?(t=typeof l=="function"?l:Y(+l),d(),i):t},i.y=function(l){return arguments.length?(e=typeof l=="function"?l:Y(+l),d(),i):e},i}const xa=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:un,forceCollide:fn,forceLink:vn,forceManyBody:wn,forceRadial:ya,forceSimulation:yn,forceX:wa,forceY:ka},Symbol.toStringTag,{value:"Module"}));var Ca=Object.defineProperty,ba=Object.defineProperties,La=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,on=(e,t,n)=>t in e?Ca(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,an=(e,t)=>{for(var n in t||(t={}))Na.call(t,n)&&on(e,n,t[n]);if(nn)for(var n of nn(t))Sa.call(t,n)&&on(e,n,t[n]);return e},Ma=(e,t)=>ba(e,La(t));class Da{constructor(t={}){this.options=t}activate(t){const{nodePositions:n,nodes:o,edges:s,emitter:i}=t;let{nodeLayouts:d,nodeLayoutMap:l}=this.buildNodeLayouts(o.value,n);const g=this.createSimulation(d,this.forceLayoutEdges(s.value,o.value));this.onTick=()=>{var k,f,u,h,x;for(const D of d){const L=(k=n.value)==null?void 0:k[D.id];if(L){const E=(f=D.x)!=null?f:0,V=(u=D.y)!=null?u:0;(L.x!==E||L.y!==V)&&Object.assign(L,{x:E,y:V})}else n.value[D.id]={x:(h=D.x)!=null?h:0,y:(x=D.y)!=null?x:0}}},g.on("tick",this.onTick),this.onTick();const r=()=>{this.options.noAutoRestartSimulation||g.alpha(.1).restart()},_=k=>{var f;if(this.options.noAutoRestartSimulation)for(const[u,h]of Object.entries(k)){const x=(f=n.value)==null?void 0:f[u];x.x=h.x,x.y=h.y}else{for(const[u,h]of Object.entries(k)){const x=l[u];x.fx=h.x,x.fy=h.y}r()}},M=k=>{var f;for(const[u,h]of Object.entries(k)){const x=this.getNodeLayout(n,u),D=(f=l==null?void 0:l[u])!=null?f:{x:0,y:0};x.value.fixed||this.options.positionFixedByDrag?(D.fx=h.x,D.fy=h.y,x.value.fixed=!0):(D.x=h.x,D.y=h.y,delete D.fx,delete D.fy)}r()},y=({node:k,event:f})=>{if(this.options.positionFixedByClickWithAltKey&&f.altKey){const u=this.getNodeLayout(n,k);let h=l==null?void 0:l[k];h||(h={id:k,x:0,y:0},l[k]=h),u.value.fixed?(delete u.value.fixed,h.x=h.fx||h.x,h.y=h.fy||h.y,delete h.fx,delete h.fy):(u.value.fixed=!0,h.fx=h.x,h.fy=h.y),r()}},p=_t(()=>[Object.keys(o.value),Object.keys(n.value),Object.values(s.value).map(k=>`${k.source}=${k.target}`)],()=>{({nodeLayouts:d,nodeLayoutMap:l}=this.buildNodeLayouts(o.value,n)),g.nodes(d);const k=g.force("edge");k&&k.links(this.forceLayoutEdges(s.value,o.value)),r()});i.on("node:dragstart",_),i.on("node:pointermove",_),i.on("node:dragend",M),i.on("node:click",y),this.onDeactivate=()=>{g.stop(),p(),i.off("node:dragstart",_),i.off("node:pointermove",_),i.off("node:dragend",M),i.off("node:click",y)}}deactivate(){this.onDeactivate&&this.onDeactivate(),this.onTick=void 0}ticked(){var t;(t=this.onTick)==null||t.call(this)}createSimulation(t,n){if(this.options.createSimulation)return this.options.createSimulation(xa,t,n);{const o=vn(n).id(s=>s.id);return yn(t).force("edge",o.distance(100)).force("charge",wn()).force("collide",fn(50).strength(.2)).force("center",un().strength(.05)).alphaMin(.001)}}buildNodeLayouts(t,n){const o=Object.keys(t).filter(d=>!(d in n.value)),s=this.forceNodeLayouts(n.value,o),i=Object.fromEntries(s.map(d=>[d.id,d]));return{nodeLayouts:s,nodeLayoutMap:i}}forceNodeLayouts(t,n){const o=Object.entries(t).map(([s,i])=>i.fixed?Ma(an({id:s},i),{fx:i.x,fy:i.y}):an({id:s},i));return n.map(s=>({id:s})).forEach(s=>o.push(s)),o}forceLayoutEdges(t,n){return Object.values(t).filter(o=>o.source in n&&o.target in n).map(o=>({source:o.source,target:o.target}))}getNodeLayout(t,n){const o=lo(t.value,n);return o.value||(o.value={x:0,y:0}),o}}const $a={class:"NG-wrap"},Ta={class:"NG-operation"},Ia={__name:"NetworkGraph",props:{NGInfo:{type:Array,default:[]}},emits:["nodePreview","nodeDel","nodeInvoking","nodeExport"],setup(e,{emit:t}){const n=e,o=t,s=S(null),i=pe(()=>Object.keys(d.value.nodes).length!==0),d=pe(()=>{let P={},A={};return n.NGInfo.forEach((O,z)=>{const{res_id:G,parent:ee}=O,Q=G+"",Ve=G+"",Ne=ee+"";O.color=O.parent_rela==="用户传入"?"#814625":"#af956c",P[Q]=O,+Ne&&(A[`${Ne}_${Ve}`]={...O,source:Ne,target:Ve}),z===0&&(_.value=[O.res_id])}),{nodes:P,edges:A}}),l=S(),g=pe(()=>d.value.nodes[l.value]),r=S([]),_=S([]),M=S(ro({view:{scalingObjects:!0,layoutHandler:new Da({positionFixedByDrag:!1,positionFixedByClickWithAltKey:!0,createSimulation:(P,A,O)=>{const z=P.forceLink(O).id(G=>G.id);return P.forceSimulation(A).force("edge",z.distance(100).strength(.5)).force("charge",P.forceManyBody().strength(-2e3)).force("center",P.forceCenter().strength(.05)).alphaMin(.001)}})},node:{selectable:!0,label:{direction:"center",color:"#333333",fontSize:14},normal:{radius:30,color:P=>P.color,strokeWidth:1,strokeColor:"#D0D3D6"},hover:{color:P=>P.color,strokeWidth:1,strokeColor:"#D0D3D6"},focusring:{visible:!0,width:4,padding:3,color:"#814625",dasharray:"0"}},edge:{normal:{color:"#aaaaaa"},hover:{color:"#aaaaaa"},margin:4,marker:{target:{type:"arrow",width:4,height:4}}}})),y={"node:click":P=>{const{node:A,event:O}=P;O.stopPropagation(),O.preventDefault(),p.value=!1,o("nodePreview",+A)},"view:click":P=>{const{node:A,event:O}=P;O.stopPropagation(),O.preventDefault(),p.value=!1},"node:contextmenu":P=>{const{node:A,event:O}=P;O.stopPropagation(),O.preventDefault(),l.value=A,k.value={display:"block",left:O.x+"px",top:O.y+"px"},p.value=!0},"view:contextmenu":P=>{const{node:A,event:O}=P;O.stopPropagation(),O.preventDefault(),p.value=!1},"node:select":P=>{r.value=P}},p=S(!1),k=S({}),f=pe(()=>{let P=r.value,A="single";return P.length===0&&(A="single"),P.length!==0&&(A="multiple"),A}),u=()=>{p.value=!1,o("nodePreview",g.value)},h=()=>{p.value=!1,o("nodeDel",g.value)},x=()=>{p.value=!1,o("nodeInvoking",g.value)},D=()=>{let P=[],A=f.value;A==="single"&&(P=[l.value]),A==="multiple"&&(P=r.value),P=P.map(O=>+O),p.value=!1,o("nodeExport",P)},L=S(!1),E=()=>{L.value=!0},V=()=>{L.value=!1};return yt(()=>{window.addEventListener("keydown",E),window.addEventListener("keyup",V)}),co(()=>{window.removeEventListener("keydown",E),window.removeEventListener("keyup",V)}),_t(L,()=>{L.value?s.value.startBoxSelection({stop:"manual",type:"invert"}):s.value.stopBoxSelection()}),(P,A)=>{const O=K("v-edge-label"),z=K("v-network-graph"),G=K("ddiv");return C(),T("div",$a,[i.value?(C(),B(z,{key:0,ref_key:"NGRef",ref:s,nodes:d.value.nodes,"selected-nodes":_.value,edges:d.value.edges,configs:M.value,"zoom-level":1,selecting:!0,"event-handlers":y},{"edge-label":b(({edge:ee,...Q})=>[$(O,uo({text:ee.parent_rela,align:"center","vertical-align":"above"},Q),null,16,["text"])]),_:1},8,["nodes","selected-nodes","edges","configs"])):j("",!0),(C(),B(fo,{to:"body"},[p.value?(C(),T("div",{key:0,class:"NG-contextmenu",style:rn(k.value)},[["single"].includes(f.value)?(C(),T("div",{key:0,class:"NG-contextmenu-item",onClick:u},"预览")):j("",!0),["single"].includes(f.value)?(C(),T("div",{key:1,class:"NG-contextmenu-item",onClick:h},"删除")):j("",!0),["single"].includes(f.value)?(C(),T("div",{key:2,class:"NG-contextmenu-item",onClick:x},"调用")):j("",!0),["single","multiple"].includes(f.value)?(C(),T("div",{key:3,class:"NG-contextmenu-item",onClick:D},"导出报告")):j("",!0)],4)):j("",!0)])),w("div",Ta,[$(G,{class:"o-btn"},{default:b(()=>[R("多选模式")]),_:1}),$(G,{class:"o-btn"},{default:b(()=>[R("导出报告")]),_:1}),$(G,{class:"o-btn"},{default:b(()=>[R("导出代码")]),_:1})])])}}},Pa=mt(Ia,[["__scopeId","data-v-dc0cc32d"]]),Aa={class:"param-wrap"},Ea={class:"param-desc"},ja={class:"param-search"},Oa={class:"param-data"},Ra={key:0,class:"data-list"},Va=["onClick"],Ba={class:"data-list"},Ha={key:1},Ua={class:"data-list"},za={key:3,class:"data-list"},Fa=["onClick"],Ka={__name:"TempParam",props:{info:{type:Object,default:()=>({id:-1,type:"",desc:"",data:[]})}},emits:["paramSelect"],setup(e,{emit:t}){const n=e,o=t,s=S([]),i=pe(()=>s.value.filter(f=>f.label.indexOf(l.value)!==-1)),d=S(""),l=S(""),g=()=>{l.value=d.value},r=S(""),_=f=>{o("paramSelect",{id:n.info.id,display:f.label,send:`{{${f.value}}}`})},M=()=>{const f=s.value.filter(u=>u.isChecked).map(u=>u.label);o("paramSelect",{id:n.info.id,display:f.join("、"),send:`@@${f.join("||")}@@`})},y=()=>{o("paramSelect",{id:n.info.id,display:r.value,send:`@@${r.value}@@`})},p=f=>{o("paramSelect",{id:n.info.id,display:f.label,send:`@@${f.label}@@`})},k=()=>{let{type:f,data:u}=n.info,h=[];f==="field"&&h.unshift({label:"",value:"",custom:!0,isChecked:!1}),u.forEach(x=>{let D=x,L=x;if(f==="file"){let E=x.split("||");D=E[0],L=E[1]}h.push({label:D,value:L,isChecked:!1})}),s.value=h};return vo(()=>{k()}),(f,u)=>{const h=K("a-input-search"),x=K("a-divider"),D=K("a-checkbox"),L=K("a-input");return C(),T("div",Aa,[w("div",Ea,U(e.info.desc),1),w("div",ja,[["file","field","radio"].includes(e.info.type)?(C(),B(h,{key:0,class:"TP-input-serach",value:d.value,"onUpdate:value":u[0]||(u[0]=E=>d.value=E),placeholder:"请输入关键字","allow-clear":"",onSearch:g},{enterButton:b(()=>[R(" 搜索 ")]),_:1},8,["value"])):j("",!0)]),$(x,{style:{margin:"10px 0 6px"}}),w("div",Oa,[e.info.type==="file"?(C(),T("div",Ra,[(C(!0),T(J,null,de(i.value,(E,V)=>(C(),T("div",{class:"data-item",key:V,onClick:P=>_(E)},U(E.label),9,Va))),128))])):j("",!0),e.info.type==="field"?(C(),T(J,{key:1},[w("div",Ba,[(C(!0),T(J,null,de(i.value,(E,V)=>(C(),T("div",{class:"data-item",key:V},[$(D,{class:"data-checkbox",checked:E.isChecked,"onUpdate:checked":P=>E.isChecked=P},null,8,["checked","onUpdate:checked"]),E.custom?(C(),B(L,{key:0,value:E.label,"onUpdate:value":P=>E.label=P,class:"TP-input-serach data-custom-input",size:"small",placeholder:"请输入自定义值"},null,8,["value","onUpdate:value"])):(C(),T("span",Ha,U(E.label),1))]))),128))]),w("div",{class:"data-confirm"},[w("div",{class:"data-confirm-btn",onClick:M},"确认")])],64)):j("",!0),e.info.type==="val"?(C(),T(J,{key:2},[w("div",Ua,[$(L,{value:r.value,"onUpdate:value":u[1]||(u[1]=E=>r.value=E),class:"TP-input-serach data-custom-input",size:"small",placeholder:"请输入自定义值"},null,8,["value"])]),w("div",{class:"data-confirm"},[w("div",{class:"data-confirm-btn",onClick:y},"确认")])],64)):j("",!0),e.info.type==="radio"?(C(),T("div",za,[(C(!0),T(J,null,de(i.value,(E,V)=>(C(),T("div",{class:"data-item",key:V,onClick:P=>p(E)},U(E.label),9,Fa))),128))])):j("",!0)])])}}},Wa=mt(Ka,[["__scopeId","data-v-52f61b86"]]);function kn(e){return ho()?(go(e),!0):!1}function Re(e){return typeof e=="function"?e():pt(e)}const Qe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ga=Object.prototype.toString,Za=e=>Ga.call(e)==="[object Object]",Ge=()=>{},qa=Ja();function Ja(){var e,t;return Qe&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Qa(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const o=t;t=void 0,o&&await o},n}function Xa(e,t,n={}){const{immediate:o=!0}=n,s=S(!1);let i=null;function d(){i&&(clearTimeout(i),i=null)}function l(){s.value=!1,d()}function g(...r){d(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,e(...r)},Re(t))}return o&&(s.value=!0,Qe&&g()),kn(l),{isPending:po(s),start:g,stop:l}}function je(e){var t;const n=Re(e);return(t=n==null?void 0:n.$el)!=null?t:n}const xt=Qe?window:void 0,xn=Qe?window.navigator:void 0;function be(...e){let t,n,o,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,s]=e,t=xt):[t,n,o,s]=e,!t)return Ge;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],d=()=>{i.forEach(_=>_()),i.length=0},l=(_,M,y,p)=>(_.addEventListener(M,y,p),()=>_.removeEventListener(M,y,p)),g=_t(()=>[je(t),Re(s)],([_,M])=>{if(d(),!_)return;const y=Za(M)?{...M}:M;i.push(...n.flatMap(p=>o.map(k=>l(_,p,k,y))))},{immediate:!0,flush:"post"}),r=()=>{g(),d()};return kn(r),r}let sn=!1;function Ya(e,t,n={}){const{window:o=xt,ignore:s=[],capture:i=!0,detectIframe:d=!1}=n;if(!o)return Ge;qa&&!sn&&(sn=!0,Array.from(o.document.body.children).forEach(y=>y.addEventListener("click",Ge)),o.document.documentElement.addEventListener("click",Ge));let l=!0;const g=y=>s.some(p=>{if(typeof p=="string")return Array.from(o.document.querySelectorAll(p)).some(k=>k===y.target||y.composedPath().includes(k));{const k=je(p);return k&&(y.target===k||y.composedPath().includes(k))}}),_=[be(o,"click",y=>{const p=je(e);if(!(!p||p===y.target||y.composedPath().includes(p))){if(y.detail===0&&(l=!g(y)),!l){l=!0;return}t(y)}},{passive:!0,capture:i}),be(o,"pointerdown",y=>{const p=je(e);l=!g(y)&&!!(p&&!y.composedPath().includes(p))},{passive:!0}),d&&be(o,"blur",y=>{setTimeout(()=>{var p;const k=je(e);((p=o.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(k!=null&&k.contains(o.document.activeElement))&&t(y)},0)})].filter(Boolean);return()=>_.forEach(y=>y())}function es(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function ts(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:s=xt,eventName:i="keydown",passive:d=!1,dedupe:l=!1}=o,g=es(t);return be(s,i,_=>{_.repeat&&Re(l)||g(_)&&n(_)},d)}function ns(){const e=S(!1),t=_o();return t&&yt(()=>{e.value=!0},t),e}function Cn(e){const t=ns();return pe(()=>(t.value,!!e()))}function ln(e,t={}){const{controls:n=!1,navigator:o=xn}=t,s=Cn(()=>o&&"permissions"in o);let i;const d=typeof e=="string"?{name:e}:e,l=S(),g=()=>{i&&(l.value=i.state)},r=Qa(async()=>{if(s.value){if(!i)try{i=await o.permissions.query(d),be(i,"change",g),g()}catch{l.value="prompt"}return i}});return r(),n?{state:l,isSupported:s,query:r}:l}function os(e={}){const{navigator:t=xn,read:n=!1,source:o,copiedDuring:s=1500,legacy:i=!1}=e,d=Cn(()=>t&&"clipboard"in t),l=ln("clipboard-read"),g=ln("clipboard-write"),r=pe(()=>d.value||i),_=S(""),M=S(!1),y=Xa(()=>M.value=!1,s);function p(){d.value&&h(l.value)?t.clipboard.readText().then(x=>{_.value=x}):_.value=u()}r.value&&n&&be(["copy","cut"],p);async function k(x=Re(o)){r.value&&x!=null&&(d.value&&h(g.value)?await t.clipboard.writeText(x):f(x),_.value=x,M.value=!0,y.start())}function f(x){const D=document.createElement("textarea");D.value=x??"",D.style.position="absolute",D.style.opacity="0",document.body.appendChild(D),D.select(),document.execCommand("copy"),D.remove()}function u(){var x,D,L;return(L=(D=(x=document==null?void 0:document.getSelection)==null?void 0:x.call(document))==null?void 0:D.toString())!=null?L:""}function h(x){return x==="granted"||x==="prompt"}return{isSupported:r,text:_,copied:M,copy:k}}const le=e=>(Co("data-v-b0fa4680"),e=e(),bo(),e),as={class:"agent"},ss={class:"agent-head d-flex"},is=le(()=>w("div",{class:"agent-title"},"TDRU 智能风险计量平台",-1)),ls=le(()=>w("div",{class:"agent-setting d-flex al-center c-pointer"},[R(" 系统设置 "),w("img",{src:$o,alt:"",style:{"margin-left":"8px"}})],-1)),rs={class:"agent-body d-flex"},cs={class:"expand-btn"},us=le(()=>w("div",null,"展",-1)),ds=le(()=>w("div",null,"开",-1)),fs=le(()=>w("img",{src:To,alt:""},null,-1)),vs=[us,ds,fs],ps=le(()=>w("div",null,"收",-1)),hs=le(()=>w("div",null,"起",-1)),gs=le(()=>w("img",{src:Io,alt:""},null,-1)),_s=[ps,hs,gs],ms={class:"dialogue-wrap"},ys={class:"dialogue-head"},ws={class:"dialogue-list"},ks=["onClick"],xs={class:"dialogue-item-content"},Cs={class:"dialogue-item-time"},bs={class:"dialogue-wrap"},Ls={class:"dialogue-head"},Ns={class:"dialogue-btn-wrap"},Ss=["onClick"],Ms={class:"dialogue-list"},Ds=["onClick"],$s={class:"dialogue-item-content d-flex al-center"},Ts={class:"dialogue-item-title"},Is={class:"ml-auto"},Ps={class:"dialogue-item-time"},As=["onClick"],Es={class:"dialogue-item-content d-flex al-center"},js={class:"dialogue-item-title"},Os={class:"ml-auto"},Rs={class:"dialogue-item-time"},Vs=["onClick"],Bs={class:"dialogue-item-content d-flex al-center"},Hs={class:"dialogue-item-title"},Us={key:0,class:"ml-auto"},zs={class:"dialogue-item-time"},Fs={class:"chat-head"},Ks={key:0,class:"chat-title"},Ws=["onClick"],Gs=le(()=>w("img",{class:"msg-icon-other",src:Po,alt:""},null,-1)),Zs={class:"msg-content-other"},qs={key:0,class:"msg-loading-icon",src:Lo,alt:""},Js=["innerHTML"],Qs={key:2,class:"msg-content-file"},Xs={key:0,src:cn,class:"c-pointer",width:88,height:88,alt:""},Ys={class:"msg-content-file-name"},ei={class:"msg-content-self"},ti=["innerHTML"],ni={key:1,class:"msg-content-file"},oi={key:0,src:cn,class:"c-pointer",width:88,height:88,alt:""},ai={class:"msg-content-file-name"},si=le(()=>w("img",{class:"msg-icon-self",src:Ao,alt:""},null,-1)),ii={key:2,class:"msg-time-wrap"},li={class:"msg-time"},ri={class:"chat-entry d-flex fd-column"},ci={class:"chat-entry-file"},ui={class:"chat-entry-input"},di={class:"msg-input-wrap"},fi={key:1,class:"msg-temp-data"},vi=["innerHTML"],pi={class:"temp-data-tip"},hi={key:0,class:"msg-temp-list"},gi=["onClick"],_i=["innerHTML"],mi={class:"temp-item-tip"},yi=le(()=>w("img",{src:jo,alt:""},null,-1)),wi={class:"chat-entry-keep d-flex al-center jc-center"},ki=le(()=>w("img",{src:Oo,alt:""},null,-1)),xi={class:"agent-right d-flex fd-column"},Ci={class:"agent-datas"},bi={class:"table-wrap"},Li={class:"agent-chart"},Ni={class:"chart-img-wrap"},Si=["src"],Mi={class:"chart-img-wrap"},Di=["src"],$i={class:"m-model-footer"},Ti={class:"help-introduce"},Ii={class:"introduce-title"},Pi={class:"introduce-subtitle"},Ai={class:"introduce-content"},Ei={class:"help-choice"},ji=["onClick"],Oi=["src"],Ri={class:"choice-item-text"},Vi={__name:"Agent",setup(e){mo(c=>({"2b7bbf11":l.value}));const t=No("mApi"),n=yo(),{setLoading:o}=Mo(),s=S(),i=S(),d=S({}),l=pe(()=>d.value.agentLeftWidthN+d.value.agentCenterWidthN+"px"),g=()=>{const c=getComputedStyle(s.value),a=vt(c.width),m=vt(c.height),N=getComputedStyle(i.value),I=vt(N.width);d.value={agentLeftWidthN:a,agentLeftHeightN:m,agentCenterWidthN:I}},r={style:{width:"90px"}},_=async c=>{const a=document.createElement("a");a.href=c,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)},M=c=>c.split("/").pop(),y=(c,a)=>{let m=c.split(".").pop(),N=c.split(".").slice(0,-1).join("."),I=a?`_${a}`:"";return c.length>=15?`${N.substring(0,5)+"..."+N.slice(-5)}${I}.${m}`:`${N}${I}.${m}`},p=()=>{window.location.href="/demo.mp4"},k=S(!1),f=S(),u=S({}),D={old_pwd:[{required:!0,message:"请输入原密码",trigger:"change"}],new_pwd:[{required:!0,validator:(c,a)=>{const m="6-16位，必须包含数字和字母";return!a||a.length<6||a.length>16||!/^(?=.*[0-9])(?=.*[a-zA-Z])[a-zA-Z0-9]+$/.test(a)?Promise.reject(m):Promise.resolve()},trigger:"change"}],new_cpwd:[{required:!0,validator:(c,a)=>a?a!==u.value.new_pwd?Promise.reject("两次输入密码不一致"):Promise.resolve():Promise.reject("请再次输入新密码"),trigger:"change"}]},L=()=>{k.value=!0,u.value={}},E=async()=>{!await f.value.validate().catch(()=>{})||(await t.userChangePwd(u.value)).status!==0||(q.success("修改成功"),k.value=!1,n.push("/Login"))},V=S(!1),P=S(),A=S({}),O={},z=async()=>{V.value=!0,A.value={};const c=await t.userGetParam();if(c.status!==0){q.error(c.info);return}A.value=c.info},G=async c=>{let a={p_name:c,p_val:A.value[c]||""};const m=await t.userSetParam(a);if(m.status!==0){q.error(m.info);return}q.success(m.info)},ee=S(!1),Q=S({top:[],mid:[],bottom:""});S(!1);const Ve=async()=>{const c=await t.userPopup();if(c.status!==0)return;let a=Jt(c.info);a&&(a.top[2]=a.top[2].split(`
`),ee.value=!0,Q.value=a)},Ne=async c=>{let m=(await t.sceneChoice({scene_id:c[2]})).info;m&&sessionStorage.setItem("scene_choice_info",m),Dt()},bn=async()=>{n.push("/Login"),await t.userLogout()},Ln=c=>{c===2&&Te(),c===4&&Dt()},Be=S(2),Se=S(1),Ct=c=>{Se.value=c,Xe()},we=S({}),Me=S(!1),he=S({}),De=S({}),bt=S(),Nn=()=>{Me.value=!1},Xe=()=>{const c=document.querySelector("#kgWrap"),a=document.querySelector("#kg"),m=document.createElement("div"),N=[{fill:"#814625",stroke:"#D0D3D6",text:"#333333"},{fill:"#af956c",stroke:"#D0D3D6",text:"#333333"}],I=[{color:"#3E2428"}],{agentLeftWidthN:H,agentLeftHeightN:W,agentCenterWidthN:X}=d.value,ve={contentClick(ue){he.value=ue,$e()},contextmenu(ue){he.value=ue,setTimeout(()=>{Me.value=!0})},nodeColor:N,linkColor:I,width:Se.value===1?H:H+X,height:W-60};c&&a&&(m.id="kg",c.removeChild(a),c.appendChild(m)),!(!we.value.links||we.value.links.length===0)&&window.initKG&&window.initKG(JSON.parse(JSON.stringify(we.value)),ve,"#kg")},Lt=c=>{let a={nodes:{},links:[]};return De.value={},c.forEach((m,N)=>{m.filename=M(m.content),m.res_id&&m.res_id!==-1?(De.value[m.filename]=m.res_id,m.name=y(m.filename,m.res_id)):m.name=y(m.filename),a.nodes[m.res_id]={...m,name:m.name,type:m.parent_rela},c.forEach((I,H)=>{N!==H&&m.res_id===+I.parent&&a.links.push({source:+I.parent,target:I.res_id,rela:I.parent_rela,type:I.parent_rela})})}),a},He=async()=>{Be.value=1;const c=await t.mainResList({dia_id:re.value});if(c.status!==0)return;let a=c.info;bt.value=a,we.value=Lt(a),Xe(),a&&a[0]&&(he.value=a[0],$e())},$e=c=>{let a="",m="";c&&c.res_id?(a=c.res_id,m=y(M(c.content))):(a=he.value.res_id,m=y(he.value.filename)),Mn(a,m),Dn(a),$n(a),Me.value=!1},Nt=async c=>{let a="";c&&c.res_id?a=c.res_id:a=he.value.res_id;const m=await t.mainResDel({res_id:a});if(m.status!==0){q.error(m.info);return}q.success("删除成功"),Me.value=!1,It(),He()},St=c=>{let a="";c.content?a=M(c.content):a=he.value.filename;let m=fe.value,N=`${m.substring(0,ot.value)}${a}${m.substring(ot.value)}`;fe.value=N,Me.value=!1},Sn=async c=>{o(!0,"等待下载中");const a=await t.mainDiaReport({dia_id:re.value,res_ids:c}).catch(()=>{o(!1)});if(o(!1),a.status!==0){q.error(a.info);return}q.success("导出成功")},Mt=S(""),Mn=async(c,a)=>{const m=await t.mainViewTable({res_id:c});if(m.status!==0)return;let N=[];Object.keys(m.info).forEach(I=>{Object.keys(m.info[I]).forEach((H,W)=>{let X=m.info[I][H][0],ve=m.info[I][H][1];N[W]?N[W][I]=X:N[W]={id:H,sort:ve,[I]:X}})}),N=N.sort((I,H)=>I.sort-H.sort),Mt.value=a,tt.value=N},Dn=async c=>{const a=await t.mainViewMissing({res_id:c});a.status===0&&(rt.value=a.info)},$n=async c=>{const a=await t.mainViewThermodynamic({res_id:c});a.status===0&&(ct.value=a.info)},Ye=S(""),et=S([]),Te=async()=>{const c=await t.mainDiaList();c.status===0&&(et.value=c.info)},Tn=async()=>{const c=await t.mainDiaSearch({kw:Ye.value});c.status===0&&(et.value=c.info)},In=async c=>{(await t.mainDiaDel({dia_id:c.dia_id})).status===0&&(q.success("删除成功"),Te())},Pn=async c=>{_(t.mainDiaDw({dia_id:c.dia_id})),q.success("代码导出成功")},An=async c=>{re.value=c.dia_id,se.value="chat",fe.value="",ne.value=null,It(),He()},En=[{title:"",dataIndex:"index",width:40,align:"center",fixed:"left"},{title:"",dataIndex:"cloumn",width:140,fixed:"left",ellipsis:!0},{title:"类型",dataIndex:"类型",width:80},{title:"数量",dataIndex:"数量",width:80},{title:"缺失值",dataIndex:"缺失值",width:80},{title:"异常值",dataIndex:"异常值",width:80},{title:"均值",dataIndex:"均值",width:80},{title:"最大值",dataIndex:"最大值",width:80},{title:"最小值",dataIndex:"最小值",width:80}],tt=S([]),jn=S(),On=async()=>{const c=await t.mainDiaDefault();if(c.status!==0)return;let a=c.info[0]||[];jn.value=c.info[0]||"",F.value=[Pt(a,{msg_from:1,chat_title:sessionStorage.getItem("scene_choice_info")||""})]},Dt=()=>{window.location.reload()},re=S(""),nt=S(null),$t=S(null),ot=S(0),fe=S(""),ge=S(!1),Rn=pe(()=>{let c=F.value[0]||{},a=c.chat_title;return a||(a=c.msg_from===0?c.content.substring(0,10):""),a}),Ue=S(),F=S([]),Vn=c=>{let a=c,m=De.value;return a.replace(/{{(\d+)}}/g,(I,H)=>{for(const W in m)if(m[W]==parseInt(H))return`<span class="msg-filename">${W}</span>`;return I})},Tt=c=>{let a=[],m=null;for(const N of c){const I=new Date(N.up_date);m!==null&&I-m>=5*60*1e3?N.isShowTime=!0:N.isShowTime=!1,N.msg_from=+N.msg_from,a.push(N),m=I}return a},It=async()=>{const c=await t.mainMsgList({dia_id:re.value});if(c.status!==0)return;let a=c.info||[];F.value=Tt(a),ke()},Pt=(c,a)=>({msg_type:c[3],content:c[2]||"",res_id:c[7]||void 0,...a}),Bn=()=>{ot.value=$t.value.resizableTextArea.textArea.selectionStart},Hn=async()=>{let c=fe.value;if(!c){ce.value="";return}const a=await t.mainDiaTemplate({kw:c});if(a.status!==0)return;let N=(a.info||[]).map(I=>({tempId:I[2],tip:I[1],content:I[0],formatVal:{},display:"",send:""})).map(I=>Ot(I));at.value=N,ce.value="temp"},At=async c=>{if(c.shiftKey&&c.key==="Enter")return;if(c.preventDefault(),ge.value){q.warning("请等待当前问题处理完成");return}let a="";if(ne.value){if(!ne.value.isDone){q.warning("有参数未选择");return}a=ne.value.send,F.value.push({msg_from:0,msg_type:0,content:ne.value.display}),ne.value=null}else a=fe.value.trim(),Object.keys(De.value).sort((N,I)=>I.length-N.length).forEach(N=>{a=a.replaceAll(`${N}`,`{{${De.value[N]}}}`)}),F.value.push({msg_from:0,msg_type:0,content:a}),fe.value="";if(!a)return;re.value||(F.value=[]),ge.value=!0;let m={};F.value.push({msg_from:1,msg_type:0,content:""}),ke(),t.mainMsgSend({data:{dia_id:re.value,content:a},chunk(N){N.startsWith("<!!p!!>")?(console.log(1,N),N.split("<!!p!!>").forEach(H=>{let W=H.split("=");W.length===2&&(m[W[0]]=+W[1])}),F.value[F.value.length-1]={...F.value[F.value.length-1],...m},ke()):N.startsWith("<!!!!!>")?(console.log(0,N),F.value.push({msg_from:1,msg_type:0,content:""}),ke()):(console.log(2,N),N&&(F.value[F.value.length-1].content+=N,ke()))},complete(N){ge.value=!1,re.value||(re.value=m.dia_id,Te()),ke(),He()},error(N){ge.value=!1,F.value.pop()},jsonRes(N){ge.value=!1,F.value.pop(),N.status!==0&&q.error(N.info)}})},Un=()=>{if(F.value.length===0){q.warn("请先发送文字消息");return}if(ge.value){q.warning("请等待当前问题处理完成");return}Ue.value.value="",Ue.value.click()},zn=async()=>{const c=new FormData,a=Ue.value.files[0];c.append("dia_id",re.value),c.append("name","filename"),c.append("filename",a),ge.value=!0;const m=await t.mainMsgUpload(c);if(ge.value=!1,m.status!==0){q.error(m.info);return}if(m.info&&m.info[0]){const N=m.info[0]||[];F.value.push(Pt(N,{msg_from:0})),ke(),Te(),He()}},ke=async()=>{await ko(),nt.value.scrollTop=nt.value.scrollHeight},Fn=async c=>{_(t.mainViewPic({res_id:c.res_id}))},Et=S(null),ce=S(""),at=S([]),ne=S(null),jt=S({}),Ot=c=>{let a=Jt(c),m=a.content,N=a.formatVal,I=/@p(.*?)@/g;a.display="",a.display=m.replace(/<b>(.*?)<\/b>/g,'<span class="content-highlight">$1</span>');let H=[];return a.display=a.display.replace(I,(W,X)=>{let ve=N[X]&&N[X].display?`<span class="content-param" data-param-id="${X}" data-param-pre="${H.join(",")}">${N[X].display}</span>`:`<span class="content-param" data-param-id="${X}" data-param-pre="${H.join(",")}">______</span>`;return H.push(X),ve}),a.send=m.replace(I,(W,X)=>N[X]&&N[X].send?N[X].send:X),a.isDone=H.length===Object.keys(a.formatVal).length,a},Kn=c=>{fe.value="",ne.value=c,at.value=[],ce.value=""},Wn=async c=>{const a=c.target.getAttribute("data-param-id");if(!a)return;const m=c.target.getAttribute("data-param-pre"),{tempId:N}=ne.value,I=await t.mainDiaTempParam({dia_id:+re.value,t_id:+N,p_id:+a,pre_params:m.split(",").map(W=>+W)});if(I.status!==0)return;let H=I.info||[];ce.value=H.type||"",jt.value={id:a,...H}},Gn=c=>{const{id:a,display:m,send:N}=c;ce.value="",ne.value.formatVal={...ne.value.formatVal,[a]:{display:m,send:N}},ne.value=Ot(ne.value)};ts("Escape",c=>{ce.value="",c.preventDefault()}),Ya(Et,()=>{ce.value=""});const st=S(""),Zn=os({source:st,legacy:!0}),qn=c=>{c&&(st.value=document.getSelection().toString())},Jn=()=>{st.value&&(Zn.copy(),q.success("复制成功"))};S([]),S(null),S("");const se=S("chat"),Qn=c=>{c.isChecked=!0,Ie.value="",se.value="multiple"},Rt=()=>{se.value="chat",F.value=F.value.map(c=>({...c,isChecked:!1}))},Xn=()=>{Rt()},it=S(""),Ie=S(""),lt=S(""),ie=S([]),_e=S("role"),Vt=S([{type:"file",text:"所有文件",placeholder:"搜索文件"},{type:"keep",text:"所有存档",placeholder:"搜索存档"},{type:"role",text:"所有角色",placeholder:"搜索角色"}]),Ce=S([]),Yn=async()=>{const c=await t.keepAdd({dia_id:re.value,msg_ids:F.value.filter(a=>a.isChecked).map(a=>a.msg_id).join(","),keep_name:Ie.value});if(c.status!==0){q.error(c.info);return}q.success(c.info),Ie.value="",Rt(),Bt()},eo=async c=>{let{type:a}=c;_e.value=a,ie.value=[],ze()},ze=async()=>{const c=await t.keepList({keep_type:_e.value});c.status===0&&(Ce.value=c.info)},to=async()=>{let c={keep_type:_e.value,kw:lt.value};ie.value[3]&&(c.uid=ie.value[3]);const a=await t.keepSearch(c);a.status===0&&(Ce.value=a.info)},Bt=c=>{ie.value&&ie.value[3]?zt(ie.value):ze(),it.value&&it.value===c&&(F.value=[])},Ht=async c=>{_(t.mainViewPic({res_id:c[3]}))},Fe=async c=>{const a=c[3];it.value=a,se.value="keep";const m=await t.keepDetail({keep_id:a});if(m.status===0){let I=m.info||[];F.value=Tt(I)}const N=await t.keepResList({keep_id:a});if(N.status===0){let I=N.info;Be.value=1,we.value=Lt(I),Xe(),I&&I[0]&&(he.value=I[0],$e())}},Ut=async c=>{const a=c[3];So.confirm({title:"确认删除该存档？",okText:"确认",cancelText:"取消",async onOk(){const m=await t.keepDel({keep_id:a});if(m.status!==0){q.error(m.info);return}q.success("删除成功"),Bt(a)},onCancel(){console.log("Cancel")}})},no=async()=>{ie.value=[],ze()},zt=async c=>{ie.value=c;const a=await t.roleList({uid:c[3]});a.status===0&&(Ce.value=a.info)},oo=()=>{ze()},rt=S(""),ct=S(""),ao=()=>{Ve(),Te(),oo(),On()};return yt(()=>{g()}),ao(),(c,a)=>{const m=K("a-menu-item"),N=K("a-menu"),I=K("a-dropdown"),H=K("data-none"),W=K("a-tab-pane"),X=K("a-input-search"),ve=K("a-tabs"),ue=K("a-radio"),Ft=K("a-image"),so=K("a-textarea"),Ke=K("a-input"),io=K("a-table"),ut=K("a-input-password"),me=K("a-form-item"),Kt=K("a-form"),Wt=K("m-button"),dt=K("a-modal"),Gt=K("a-radio-group");return C(),T("div",as,[w("div",ss,[is,w("div",{class:"agent-help ml-auto c-pointer"},[w("img",{src:Do,onClick:p,alt:""})]),$(I,null,{overlay:b(()=>[$(N,null,{default:b(()=>[$(m,{key:"1",onClick:z},{default:b(()=>[R("系统参数设置")]),_:1}),$(m,{key:"2",onClick:L},{default:b(()=>[R("修改密码")]),_:1}),$(m,{key:"3",onClick:bn},{default:b(()=>[R("退出登录")]),_:1})]),_:1})]),default:b(()=>[ls]),_:1})]),w("div",rs,[w("div",{ref_key:"agentLeftRef",ref:s,class:"agent-left d-flex"},[w("div",{class:"agent-node",onContextmenu:wo(Nn,["prevent"])},[$(ve,{class:"m-tabs",activeKey:Be.value,"onUpdate:activeKey":a[4]||(a[4]=v=>Be.value=v),size:"small",onChange:Ln},{default:b(()=>[(C(),B(W,{key:1,tab:"数据管理"},{default:b(()=>[w("div",{class:ft(["node-wrap",{expand:Se.value===2}])},[$(Pa,{NGInfo:bt.value,onNodePreview:$e,onNodeDel:Nt,onNodeInvoking:St,onNodeExport:Sn},null,8,["NGInfo"]),w("div",cs,[Se.value===1?(C(),T("div",{key:0,class:"expand-box",onClick:a[0]||(a[0]=v=>Ct(2))},vs)):j("",!0),Se.value===2?(C(),T("div",{key:1,class:"expand-box",onClick:a[1]||(a[1]=v=>Ct(1))},_s)):j("",!0)]),!we.value.links||we.value.links.length===0?(C(),B(H,{key:0})):j("",!0)],2)]),_:1})),(C(),B(W,{key:2,tab:"对话管理"},{default:b(()=>[w("div",ms,[w("div",ys,[$(X,{class:"dialogue-serach",value:Ye.value,"onUpdate:value":a[2]||(a[2]=v=>Ye.value=v),placeholder:"搜索历史对话","allow-clear":"",onSearch:Tn},{enterButton:b(()=>[R(" 搜索 ")]),_:1},8,["value"])]),w("div",ws,[(C(!0),T(J,null,de(et.value,(v,te)=>(C(),B(I,{trigger:["contextmenu"],key:te},{overlay:b(()=>[$(N,null,{default:b(()=>[$(m,{key:"1",onClick:Z=>In(v)},{default:b(()=>[R("删除")]),_:2},1032,["onClick"]),$(m,{key:"2",onClick:Z=>Pn(v)},{default:b(()=>[R("代码导出")]),_:2},1032,["onClick"])]),_:2},1024)]),default:b(()=>[w("div",{class:"dialogue-item c-pointer",onClick:Z=>An(v)},[w("div",xs,U(v.title),1),w("div",Cs,U(v.up_date),1)],8,ks)]),_:2},1024))),128))])])]),_:1})),(C(),B(W,{key:3,tab:"存档管理"},{default:b(()=>[w("div",bs,[w("div",Ls,[w("div",Ns,[Zt(w("div",{class:"dialogue-btn back-dialogue-btn",onClick:no},"返回",512),[[qt,ie.value[3]]]),(C(!0),T(J,null,de(Vt.value,(v,te)=>(C(),T("div",{class:ft(["dialogue-btn",_e.value===v.type?"active-dialogue-btn":""]),key:te,onClick:Z=>eo(v)},U(v.text),11,Ss))),128))]),$(X,{class:"dialogue-serach",value:lt.value,"onUpdate:value":a[3]||(a[3]=v=>lt.value=v),placeholder:Vt.value.find(v=>v.type===_e.value).placeholder,"allow-clear":"",onSearch:to},{enterButton:b(()=>[R(" 搜索 ")]),_:1},8,["value","placeholder"])]),w("div",Ms,[(C(!0),T(J,null,de(Ce.value,(v,te)=>(C(),T(J,{key:te},[_e.value==="file"?(C(),B(I,{key:0,trigger:["contextmenu"]},{overlay:b(()=>[$(N,null,{default:b(()=>[$(m,{onClick:Z=>Ht(v)},{default:b(()=>[R("下载")]),_:2},1032,["onClick"])]),_:2},1024)]),default:b(()=>[w("div",{class:"dialogue-item c-pointer",onClick:Z=>Ht(v)},[w("div",$s,[w("span",Ts,U(v[0]),1),w("span",Is,U(v[1]),1)]),w("div",Ps,U(v[2]),1)],8,Ds)]),_:2},1024)):j("",!0),_e.value==="keep"?(C(),B(I,{key:1,trigger:["contextmenu"]},{overlay:b(()=>[$(N,null,{default:b(()=>[$(m,{onClick:Z=>Fe(v)},{default:b(()=>[R("加载")]),_:2},1032,["onClick"]),$(m,{onClick:Z=>Ut(v)},{default:b(()=>[R("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),default:b(()=>[w("div",{class:"dialogue-item c-pointer",onClick:Z=>Fe(v)},[w("div",Es,[w("span",js,U(v[0]),1),w("span",Os,U(v[1]),1)]),w("div",Rs,U(v[2]),1)],8,As)]),_:2},1024)):j("",!0),_e.value==="role"?(C(),B(I,{key:2,trigger:["contextmenu"]},{overlay:b(()=>[ie.value[3]?(C(),B(N,{key:0},{default:b(()=>[$(m,{onClick:Z=>Fe(v)},{default:b(()=>[R("加载")]),_:2},1032,["onClick"]),$(m,{onClick:Z=>Ut(v)},{default:b(()=>[R("删除")]),_:2},1032,["onClick"])]),_:2},1024)):j("",!0)]),default:b(()=>[w("div",{class:"dialogue-item c-pointer",onClick:Z=>ie.value[3]?Fe(v):zt(v)},[w("div",Bs,[w("span",Hs,U(v[0]),1),ie.value[3]?(C(),T("span",Us,U(v[1]),1)):j("",!0)]),w("div",zs,U(v[2]),1)],8,Vs)]),_:2},1024)):j("",!0)],64))),128)),!Ce.value||Ce.value.length===0?(C(),B(H,{key:0})):j("",!0)])])]),_:1})),(C(),B(W,{key:4,tab:"新建对话"}))]),_:1},8,["activeKey"])],32)],512),w("div",{ref_key:"agentCenterRef",ref:i,class:"agent-center"},[w("div",{class:ft(["chat-wrap d-flex fd-column",{"chat-wrap-multiple":se.value==="multiple"}])},[w("div",Fs,[F.value[0]?(C(),T("div",Ks,U(Rn.value),1)):j("",!0)]),w("div",{ref_key:"chatContentRef",ref:nt,class:"chat-content"},[(C(!0),T(J,null,de(F.value,(v,te)=>(C(),B(I,{key:te,trigger:["contextmenu"],onOpenChange:qn},{overlay:b(()=>[$(N,null,{default:b(()=>[$(m,{onClick:Jn},{default:b(()=>[R("复制")]),_:1}),["chat"].includes(se.value)?(C(),B(m,{key:0,onClick:Z=>Qn(v)},{default:b(()=>[R("多选")]),_:2},1032,["onClick"])):j("",!0),["chat","keep"].includes(se.value)&&[1,2].includes(v.msg_type)?(C(),B(m,{key:1,onClick:Z=>Fn(v)},{default:b(()=>[R("下载")]),_:2},1032,["onClick"])):j("",!0),["chat"].includes(se.value)&&[1].includes(v.msg_type)?(C(),B(m,{key:2,onClick:Z=>$e(v)},{default:b(()=>[R("预览")]),_:2},1032,["onClick"])):j("",!0),["chat"].includes(se.value)&&[1].includes(v.msg_type)?(C(),B(m,{key:3,onClick:Z=>Nt(v)},{default:b(()=>[R("删除")]),_:2},1032,["onClick"])):j("",!0),["chat"].includes(se.value)&&[1].includes(v.msg_type)?(C(),B(m,{key:4,onClick:Z=>St(v)},{default:b(()=>[R("调用")]),_:2},1032,["onClick"])):j("",!0)]),_:2},1024)]),default:b(()=>[w("div",{class:"chat-msg",onClick:Z=>v.isChecked=!v.isChecked},[$(ue,{class:"m-radio chat-msg-checked",checked:v.isChecked,"onUpdate:checked":Z=>v.isChecked=Z},null,8,["checked","onUpdate:checked"]),v.msg_from===1?(C(),T(J,{key:0},[Gs,w("div",Zs,[v.content?j("",!0):(C(),T("img",qs)),v.msg_type===0?(C(),T("div",{key:1,innerHTML:v.content},null,8,Js)):(C(),T("div",Qs,[v.msg_type===1?(C(),T("img",Xs)):j("",!0),v.msg_type===2?(C(),B(Ft,{key:1,src:pt(t).mainViewPic({res_id:v.res_id}),class:"c-pointer",width:150,height:150,alt:""},null,8,["src"])):j("",!0),w("div",Ys,U(y(M(v.content))),1)]))])],64)):j("",!0),v.msg_from===0?(C(),T(J,{key:1},[w("div",ei,[v.msg_type===0?(C(),T("div",{key:0,innerHTML:Vn(v.content)},null,8,ti)):(C(),T("div",ni,[v.msg_type===1?(C(),T("img",oi)):j("",!0),v.msg_type===2?(C(),B(Ft,{key:1,src:pt(t).mainViewPic({res_id:v.res_id}),class:"c-pointer",width:150,height:150,alt:""},null,8,["src"])):j("",!0),w("div",ai,U(y(M(v.content))),1)]))]),si],64)):j("",!0),v.isShowTime?(C(),T("div",ii,[w("div",li,U(v.up_date),1)])):j("",!0)],8,Ws)]),_:2},1024))),128))],512),w("div",ri,[se.value==="chat"?(C(),T(J,{key:0},[w("div",ci,[w("img",{class:"c-pointer",src:Eo,title:"文件类型为 csv、xs、xlsx，默认只读取第一个sheet，表头只支持首行",alt:"",onClick:Un}),Zt(w("input",{ref_key:"chatFileRef",ref:Ue,type:"file",onChange:zn},null,544),[[qt,!1]])]),w("div",ui,[$(I,{open:!!ce.value},{overlay:b(()=>[ce.value?(C(),T("div",{key:0,ref_key:"msgTempRef",ref:Et,class:"msg-temp-wrap",style:rn({width:d.value.agentCenterWidthN+"px"})},[ce.value==="temp"?(C(),T("div",hi,[(C(!0),T(J,null,de(at.value,(v,te)=>(C(),T("div",{class:"msg-temp-item",key:te,onClick:Z=>Kn(v)},[w("div",{class:"temp-item-content",innerHTML:v.display},null,8,_i),w("div",mi,U(v.tip),1)],8,gi))),128))])):(C(),B(Wa,{key:1,info:jt.value,class:"msg-temp-param",onParamSelect:Gn},null,8,["info"]))],4)):j("",!0)]),default:b(()=>[w("div",di,[ne.value?j("",!0):(C(),B(so,{key:0,ref_key:"msgTextareaRef",ref:$t,value:fe.value,"onUpdate:value":a[5]||(a[5]=v=>fe.value=v),class:"chat-input",placeholder:"请输入需要描述的问题",bordered:!1,"auto-size":{minRows:2,maxRows:3},onBlur:Bn,onInput:Hn,onKeydown:xo(At,["enter"])},null,8,["value"])),ne.value?(C(),T("div",fi,[w("div",{class:"temp-data-content",innerHTML:ne.value.display,onClick:Wn},null,8,vi),w("div",pi,U(ne.value.tip),1)])):j("",!0)])]),_:1},8,["open"])]),w("div",{class:"chat-entry-send d-flex"},[w("div",{class:"entry-btn c-pointer d-flex al-center jc-center ml-auto",onClick:At},[yi,R("发送 ")])])],64)):j("",!0),se.value==="multiple"?(C(),T(J,{key:1},[w("div",wi,[$(Ke,{class:"keep-input",value:Ie.value,"onUpdate:value":a[6]||(a[6]=v=>Ie.value=v),placeholder:"请输入存档名称",maxlength:15},null,8,["value"]),w("div",{class:"entry-btn c-pointer d-flex al-center jc-center",onClick:Yn},[ki,R("保存 ")])]),w("img",{class:"msg-multiple-close c-pointer",src:Ro,alt:"",onClick:Xn})],64)):j("",!0),se.value==="keep"?(C(),T(J,{key:2},[],64)):j("",!0)])],2)],512),w("div",xi,[w("div",Ci,[$(ve,{class:"m-tabs"},{default:b(()=>[$(W,{key:"1",tab:"数据预览"},{default:b(()=>[w("div",bi,[tt.value.length!==0?(C(),B(io,{key:0,class:"m-table",rowKey:"id",columns:En,"data-source":tt.value,bordered:!0,pagination:!1,scroll:{x:410,y:250},size:"small"},{headerCell:b(({title:v,column:te})=>[te.dataIndex==="cloumn"?(C(),T(J,{key:0},[R(U(Mt.value),1)],64)):j("",!0)]),bodyCell:b(({column:v,record:te,index:Z})=>[v.dataIndex==="index"?(C(),T(J,{key:0},[R(U(Z+1),1)],64)):j("",!0),v.dataIndex==="cloumn"?(C(),T(J,{key:1},[R(U(te.id),1)],64)):j("",!0)]),_:1},8,["data-source"])):(C(),B(H,{key:1}))])]),_:1})]),_:1})]),w("div",Li,[$(ve,{class:"m-tabs"},{default:b(()=>[(C(),B(W,{key:1,tab:"数据缺失率图"},{default:b(()=>[w("div",Ni,[rt.value?(C(),T("img",{key:0,src:rt.value,alt:""},null,8,Si)):(C(),B(H,{key:1}))])]),_:1})),(C(),B(W,{key:2,tab:"相关性图"},{default:b(()=>[w("div",Mi,[ct.value?(C(),T("img",{key:0,src:ct.value,alt:""},null,8,Di)):(C(),B(H,{key:1}))])]),_:1}))]),_:1})])])]),$(dt,{open:k.value,"onUpdate:open":a[11]||(a[11]=v=>k.value=v),title:"修改密码",maskClosable:!1,width:"400px"},{footer:b(()=>[w("div",$i,[$(Wt,{type:"cancel",onClick:a[10]||(a[10]=v=>k.value=!1)},{default:b(()=>[R("取消")]),_:1}),$(Wt,{type:"confirm",onClick:E},{default:b(()=>[R("确认")]),_:1})])]),default:b(()=>[$(Kt,{ref_key:"pwdFormRef",ref:f,model:u.value,rules:D,autocomplete:"off","label-col":r},{default:b(()=>[$(me,{label:"原密码",name:"old_pwd"},{default:b(()=>[$(ut,{value:u.value.old_pwd,"onUpdate:value":a[7]||(a[7]=v=>u.value.old_pwd=v),placeholder:"请输入原密码"},null,8,["value"])]),_:1}),$(me,{label:"新密码",name:"new_pwd"},{default:b(()=>[$(ut,{value:u.value.new_pwd,"onUpdate:value":a[8]||(a[8]=v=>u.value.new_pwd=v),placeholder:"6-16位，必须包含数字和字母"},null,8,["value"])]),_:1}),$(me,{label:"确认密码",name:"new_cpwd"},{default:b(()=>[$(ut,{value:u.value.new_cpwd,"onUpdate:value":a[9]||(a[9]=v=>u.value.new_cpwd=v),placeholder:"请再次输入新密码"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),$(dt,{open:V.value,"onUpdate:open":a[22]||(a[22]=v=>V.value=v),title:"系统参数设置",maskClosable:!1,width:"400px",footer:null},{default:b(()=>[$(Kt,{ref_key:"settingFormRef",ref:P,model:A.value,rules:O,autocomplete:"off","label-col":r,style:{"margin-top":"20px"}},{default:b(()=>[$(me,{label:"随机度",name:"tempture"},{default:b(()=>[$(Ke,{value:A.value.tempture,"onUpdate:value":a[12]||(a[12]=v=>A.value.tempture=v),placeholder:"待输入",onBlur:a[13]||(a[13]=v=>G("tempture"))},null,8,["value"])]),_:1}),$(me,{label:"文本长度",name:"token_len"},{default:b(()=>[$(Ke,{value:A.value.token_len,"onUpdate:value":a[14]||(a[14]=v=>A.value.token_len=v),placeholder:"待输入",onBlur:a[15]||(a[15]=v=>G("token_len"))},null,8,["value"])]),_:1}),$(me,{label:"组合数",name:"top_k"},{default:b(()=>[$(Ke,{value:A.value.top_k,"onUpdate:value":a[16]||(a[16]=v=>A.value.top_k=v),placeholder:"待输入",onBlur:a[17]||(a[17]=v=>G("top_k"))},null,8,["value"])]),_:1}),$(me,{label:"弹窗帮助",name:"modal_help"},{default:b(()=>[$(Gt,{value:A.value.is_pop,"onUpdate:value":a[18]||(a[18]=v=>A.value.is_pop=v),onChange:a[19]||(a[19]=v=>G("is_pop"))},{default:b(()=>[$(ue,{class:"m-radio",value:"1"},{default:b(()=>[R("开启")]),_:1}),$(ue,{class:"m-radio",value:"0"},{default:b(()=>[R("关闭")]),_:1})]),_:1},8,["value"])]),_:1}),$(me,{label:"模式",name:"user_type"},{default:b(()=>[$(Gt,{value:A.value.user_type,"onUpdate:value":a[20]||(a[20]=v=>A.value.user_type=v),onChange:a[21]||(a[21]=v=>G("user_type"))},{default:b(()=>[$(ue,{class:"m-radio",value:"1"},{default:b(()=>[R("新手")]),_:1}),$(ue,{class:"m-radio",value:"2"},{default:b(()=>[R("熟练")]),_:1}),$(ue,{class:"m-radio",value:"3"},{default:b(()=>[R("专家")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),$(dt,{open:ee.value,"onUpdate:open":a[24]||(a[24]=v=>ee.value=v),wrapClassName:"help-modal",maskClosable:!1,footer:null,closable:!1,centered:""},{default:b(()=>[w("img",{class:"help-close",src:Vo,onClick:a[23]||(a[23]=v=>ee.value=!1),alt:""}),w("div",Ti,[w("div",Ii,U(Q.value.top[0]),1),w("div",Pi,U(Q.value.top[1]),1),w("div",Ai,[(C(!0),T(J,null,de(Q.value.top[2],(v,te)=>(C(),T("div",{class:"introduce-item",key:te},U(v),1))),128))])]),w("div",Ei,[(C(!0),T(J,null,de(Q.value.mid,(v,te)=>(C(),T("div",{class:"help-choice-item",key:te,onClick:Z=>Ne(v)},[w("img",{class:"choice-item-icon",src:v[0],alt:""},null,8,Oi),w("div",Ri,U(v[1]),1)],8,ji))),128))])]),_:1},8,["open"])])}}},Hi=mt(Vi,[["__scopeId","data-v-b0fa4680"]]);export{Hi as default};
